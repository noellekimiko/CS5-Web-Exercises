<html>
<p />
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15">
  <base href="https://www.cs.hmc.edu/twiki/bin/view/CS5/WebExCr2011Lab3"> 

  <title>CS5 - WebExCr2011Lab3</title>


  <link rel="stylesheet"
		  title="HMCCS5Skin"
		  type="text/css"
		  href="/twiki/pub/TWiki/HMCCS5Skin/hmccs5.css" >
  <link rel="stylesheet"
		  title="HMCCS5Skin"
		  type="text/css"
		  href="/twiki/pub/TWiki/HMCCS5Skin/hmccs5-colors-ltblue.css" >
  <link rel="stylesheet"
		  title="HMCCS5Skin"
		  type="text/css"
		  href="/twiki/pub/TWiki/HMCCS5Skin/hmccs5-colors-ltblue.css" >
  <style type="text/css">
  .header {
	 background-image: url(https://www.cs.hmc.edu/~cs5grad/cs5/images/clouds.jpg);
  }
  //.sidebar {
  //  background-image: url(https://www.cs.hmc.edu/~cs5grad/cs5/images/clouds.jpg);
  //}
  .subheader {
	 background-image: url(https://www.cs.hmc.edu/~cs5grad/cs5/images/clouds.jpg);
  }
  .footer {
	 background-image: url(https://www.cs.hmc.edu/~cs5grad/cs5/images/clouds.jpg);
  }
  </style>
</head>
<p />
<body class="composite">
<p />
<a name="top"></a>
<p />
<div class="header">
  <img class="logo" src="http://www.cs.hmc.edu/~cs5grad/cs5/images/cs5_logo.png">
</div>
<p />
<p />
<div class="subheader">
  <a class="twikiLink" href="/twiki/bin/view/CS5/WebHome">CS5 Web</a> &gt; <a class="twikiLink" href="/twiki/bin/view/CS5/WebCS5DevelopmentPage">WebCS5DevelopmentPage</a> &gt;
  <a class="twikiLink" href="/twiki/bin/view/CS5/WebExCr2011Lab3">WebExCr2011Lab3</a>
  <div style="margin-bottom: 6px;">
	 <b>Next HW</b>: &nbsp;&nbsp; <b><a class="twikiLink" href="/twiki/bin/view/CS5/ProjectsPage">Final projects</a></b> <!--and <a href="/twiki/bin/view/CS5/Homework8Gold" class="twikiLink">HW 8</a></b>--> <!-- <b><a class="twikiLink" href="/twiki/bin/view/CS5/Homework12Gold">Milestone/hw12</a></b> &nbsp;&nbsp; <b><a href="/twiki/bin/view/CS5/Homework12Black" class="twikiLink">Milestone/hw12</a></b> --> <!-- <b><a class="twikiLink" href="/twiki/bin/view/CS5/Homework11Gold">Gold HW 11</a></b>      Homework12Gold  <a href="/twiki/bin/view/CS5/ProjectsPage" class="twikiLink">ProjectsPage</a>  -->  &nbsp;&nbsp; will be due on: <font color="darkgreen"><b>Sun., May 3, 11:59pm</b></font> <br>
	 Next Lab: <b><a class="twikiLink" href="/twiki/bin/view/CS5/ProjectsPage">Final projects</a></b> <!-- <b><a href="/twiki/bin/view/CS5/Lab11" class="twikiLink">Lab 11: vPython!</a></b>   <b><a class="twikiLink" href="/twiki/bin/view/CS5/Homework12Gold">Open lab: FSMs, ExCr, or projects</a></b>    --> &nbsp;&nbsp; will be held on: Mon. April 27 or Tue. April 28 <br>
	 Submissions: <a href="http://www.cs.hmc.edu/submit">CS submission site</a>
  </div>
</div>
<p />
<div class="main">
<a name="text"></a><h2><a name="Web_Extra_Credit_Lab_3_CGI_Funct"></a> Web Extra Credit Lab 3: CGI Functions Using Python </h2>
<p />
This week, you will configure your server so that it can use Python code as it delivers pages to a browser...
<p /> <ul>
<li> <a href="https://www.cs.hmc.edu/twiki/pub/CS5/WebExCr2011Lab3/web.zip" target="_top">web.zip</a>: simple Hello example
</li></ul> 
<p />
<p />
<h3><a name="Running_a_test_cgi_script"></a> <b>Running a test cgi script</b> </h3>
<p />
Create a new file (using the text editor of your choice) in your <tt>cgi-bin</tt> directory. Name the file <tt>test.py</tt>.
<b>Note:</b> Python assumes that all files in the cgi-bin folder are scripts, and will accordingly try to run them. This is why you should place images in the <tt>web</tt> folder and all python code in <tt>cgi-bin</tt>. Failing to do so will result in a permissions or an OS error as Python tries to run an image.
<p />
<b>Mac users</b>: Into that file paste the code
<pre>
#!/Library/Frameworks/Python.framework/Versions/2.7/bin/python

import cgi

cgi.test()
</pre>
<p />
<b>Windows users</b>: Into that file paste the code
<pre>
#!C:/Python27/python.exe

import cgi

cgi.test()
</pre>
<p />
If you're on a Mac, you'll need to change the permissions of this <tt>test.py</tt> file so that it is executable. One way to do this is to open a terminal window and go to that directory.
Then, type
<pre>
chmod ugo+rx test.py
</pre>
<p />
On windows, our tests didn't seem to require any changing of permissions... .
<p />
Once that's done, you should be able to run this test Python script by going to the appropriate URL:
<p />
<a href="http://localhost:8000/cgi-bin/test.py" target="_top">http://localhost:8000/cgi-bin/test.py</a>
<p />
<p />
The result, if everything is set up, should be a long list of cgi parameters -- not overly interesting, admittedly, but it's a sign that things are working!
<p />
Now, you can write your first Python-based web script!
<p />
<h2><a name="The_Hello_world_script"></a><a name="The_Hello_world_script_"></a> The <tt>Hello, world!</tt> script! </h2>
<p />
Replace the contents of your <tt>test.py</tt> file with the following:
<p />
(Windows users, replace the top line with the appropriate one for Windows, as we did above!)
<p />
<pre>
#!/Library/Frameworks/Python.framework/Versions/2.7/bin/python

import cgi
import cgitb; cgitb.enable()


print &#34;Content-Type: text/html; charset&#61;ISO-8859-1\n\n&#34;
print 

print &#34;&#34;&#34;
&#60;html&#62;
&#60;body&#62;
&#60;h1&#62;Hello from Python!&#60;/h1&#62;
&#60;/body&#62;
&#60;/html&#62;
&#34;&#34;&#34;
</pre>
<p />
Here's what this does: <ul>
<li> It tells the server where to find Python (top line)
</li> <li> It imports Python's cgi and cgi-debugging libraries (the latter is <tt>cgitb</tt>)
</li> <li> It prints the HTML header that browsers expect to see (the odd <tt>print</tt> lines)
</li> <li> It then <i><b>prints the HTML page you would like to show</b></i>!
</li></ul> 
<p />
Fundamentally, this is how Python interacts with the CGI server: it prints out the HTML that you would like it to send to a browser.
<p />
Note that we are using Python's triple-quoted strings (like docstrings) in order to do this. They let us hit return in the middle of the string without confusing Python.
<p />
Go ahead and reload the URL and make sure you see the HTML above. If something goes wrong, the debugging module will print a relatively-nicely formatted message.
<p />
But if the permissions (on the Mac) are incorrect, then you'll need to change those: the error in that case is an unhelpful "Internal Server Error." Since the Python never even ran, it can't even print a debugging message.
<p />
<br>
<p />
<h2><a name="The_Hello_you_script"></a><a name="The_Hello_you_script_"></a> The <tt>Hello, you!</tt> script... </h2>
<p />
Next, change your <tt>test.py</tt> to the following -- <i>be sure to read this over carefully</i> to get a sense of how it's working... . (Again, switch the first line to the appropriate one if you're a windows user...)
<p />
<pre>
#!/Library/Frameworks/Python.framework/Versions/2.7/bin/python

import cgi
import cgitb; cgitb.enable()

# this variable, form, holds the data passed into this Python script
form &#61; cgi.FieldStorage()

# this gets a list of all inputs named &#34;name&#34;
L &#61; form.getlist( &#34;name&#34; ) 

# next, we check if any inputs have come in
if len(L) &#61;&#61; 0:
    name &#61; &#34;NoName&#34;
else:
    name &#61; L&#91;0]  # take the first input


print &#34;Content-Type: text/html; charset&#61;ISO-8859-1\n\n&#34;
print 

print &#34;&#34;&#34;
&#60;html&#62;
&#60;body&#62;
&#60;h1&#62;Hello from Python!&#60;/h1&#62;
&#34;&#34;&#34;

print &#34;&#60;h2&#62;&#60;font color&#61;blue&#62;Welcome&#34;, name, &#34;&#60;/font&#62;&#60;/h2&#62;&#34;

print &#34;&#34;&#34;
&#60;/body&#62;
&#60;/html&#62;
&#34;&#34;&#34;
</pre>
<p />
When you run this new script, it will print (in its webpage) <b><font size="+1" color="blue">Welcome NoName</font></b> <br><br>
<p />
However, if you pass an input <i>within the URL</i> of this new page, it will receive and use that input. Try it by entering the URL:
<p />
<a href="http://localhost:8000/cgi-bin/test.py?name=Spam%20McSpamSpam" target="_top">http://localhost:8000/cgi-bin/test.py?name=Spam%20McSpamSpam</a>.
<p />
<p />
The <tt>%20</tt> is a URL-safe method of inputting a space character, as you'll see when you load the page!
<p />
<br>
<p />
<p />
<h2><a name="Calling_the_form_from_an_HTML_pa"></a> Calling the form from an HTML page </h2>
<p />
You can create an HTML web form that will call the <tt>test.py</tt> script with whatever name you input.
<p />
To do this, create a file named <tt>input.html</tt>, not in <tt>cgi-bin</tt>, but in <tt>web</tt> with the following contents:
<pre>
&#60;html&#62;
&#60;head&#62;&#60;title&#62;Hello from Python&#60;/title&#62;&#60;/head&#62;
&#60;body&#62;
&#60;h2&#62;Hello from Python&#60;/h2&#62;


&#60;!-- here is a web form --&#62;

&#60;form name&#61;&#34;input&#34; action&#61;&#34;cgi-bin/test.py&#34; method&#61;&#34;get&#34;&#62;
Name: &#60;input type&#61;&#34;text&#34; name&#61;&#34;name&#34;&#62;
&#60;input type&#61;&#34;submit&#34; value&#61;&#34;Submit&#34;&#62;
&#60;/form&#62;

&#60;!-- this ends the web form --&#62;


&#60;/body&#62;
&#60;/html&#62;
</pre>
You'll need that file to be readable - it might be, but it's safe to run
<pre>
chmod 644 input.html
</pre>
<p />
Then, you should be able to load the URL <a href="http://localhost:8000/input.html">http://localhost:8000/input.html</a>, input your name, and then
the form will call the Python script <tt>test.py</tt> in <tt>cgi-bin</tt>, and then you'll see the personalized welcoming message... .
<p />
<h2><a name="Calling_the_form_from_another_Py"></a> Calling the form from another Python script </h2>
<p />
If that works, try calling <tt>test.py</tt> from an input <i>Python script</i> named <tt>input.py</tt>.
<p />
To that end, paste the following code into the file <tt>input.py</tt> in the <tt>cgi-bin</tt> directory:
<pre>
#!/Library/Frameworks/Python.framework/Versions/2.7/bin/python

import cgi
import cgitb; cgitb.enable()


print &#34;&#34;&#34;Content-Type: text/html; charset&#61;ISO-8859-1


&#60;html&#62;
&#60;head&#62;&#60;title&#62;Hello from Python&#60;/title&#62;&#60;/head&#62;
&#60;body&#62;
&#60;h2&#62;Hello from Python&#60;/h2&#62;


&#60;!-- here is a web form --&#62;

&#60;form name&#61;&#34;input&#34; action&#61;&#34;test.py&#34; method&#61;&#34;get&#34;&#62;
Name: &#60;input type&#61;&#34;text&#34; name&#61;&#34;name&#34;&#62;
&#60;input type&#61;&#34;submit&#34; value&#61;&#34;Submit&#34;&#62;
&#60;/form&#62;

&#60;!-- this ends the web form --&#62;


&#60;/body&#62;
&#60;/html&#62;
&#34;&#34;&#34;
</pre>
<p />
Set its permissions with <tt>chmod 755 input.py</tt>.
<p />
Then, load the file at the URL <a href=""></a>, type your name, and -- it should again run <tt>test.py</tt> to result in the same welcome message.
<p />
<br>
<p />
<h2><a name="Problem_1_A_Customized_Welcome_P"></a> Problem 1: A Customized Welcome Page... </h2>
<p />
Finally, alter the <tt>test.py</tt> above so that it offers at least two custom messages, depending on the value of the input parameter, <tt>name</tt>. You might offer a custom message for your name, but a generic message for others' names...
<p />
<br><br>
<p />
<b><i>To submit</i></b>, take a screenshot of the two different outputs of your system (with the URL line, too!) and submit those as <ul>
<li> <tt>hw3pr1im1.png</tt> and 
</li> <li> <tt>hw3pr1im2.png</tt>
</li></ul> 
<p />
You can always submit additional images as "support files" from the submission interface.
<p />
<br><br>
<p />
<i>Congratulations!</i> You have now built a Python-based web application, although it may be a relatively simple one. You will be able to continue building web applications in  future weeks, if you'd like to.
<p />
In fact, if there's an application you <em>want</em> to build, let me know and we can make that one of the assignments (for you in particular) in one of the coming weeks.
<p />
Next, we'll add a web form that will pass input to your Python web application... . (If this is already familiar, feel free to do so now <img src="https://www.cs.hmc.edu/twiki/pub/TWiki/SmiliesPlugin/smile.gif" alt="smile" title="smile" border="0" /> !)
<p />
<br>
<p />
<!--
<p />
<strong>Note:</strong> For these functions, we would like you to do your debugging by first making sure your program works from the Python shell before implementing it in CGI.
<p />
<strong>'Nother Note:</strong> Aside from the other additional lines which need to be added to your Python scripts in order that they run in CGI, do not forget that the <em>top</em> line of each Python script will look similar to:
<ul>
<li> <code>#!C:/Python27/python.exe</code> for Windows users, or </li>
<li> <code>#!/usr/local/bin/python</code> for Mac users</li>
</ul>
<p />
<strong>Not the Last Note:</strong> Make sure that before you start printing your HTML page you add the following code to your script:
<pre>   print &#34;Content-Type: text/html; charset&#61;ISO-8859-1\n\n&#34;
   print </pre>
<p />
<strong>Last Note:</strong> Lastly, remember to include the lines: 
<pre>   import cgi
   import cgitb; cgitb.enable() </pre> <ul>
<li> The cgi module allows you to access the data from the form you will use to call the python script.
</li> <li> The cgitb module will allow python error output to be displayed on your web browser if something goes wrong. It is very helpful for troubleshooting.
</li></ul> 
<h3><a name="Scrabble"></a><a name="Scrabble_"></a> Scrabble! </h3>
<p />
Write a Python function named <code>scrabbleScore(S)</code>, which takes as input a string <code>S</code>, which will have only lowercase letters, and should return as output the scrabble score of that string. Ignore the fact that, in reality, the availability of each letter tile is limited.
<p />
Here are some examples in the Python shell:
<p />
<pre>
&#62;&#62;&#62; scrabbleScore(&#39;quetzal&#39;)
25
&#62;&#62;&#62; scrabbleScore(&#39;jonquil&#39;)
23
&#62;&#62;&#62; scrabbleScore(&#39;syzygy&#39;)
25
</pre>
<p />
For this program, first write a recursive version of <code>scrabbleScore(S)</code>, which you may choose to call <code>scrabbleScoreRec(S)</code>, and then implement <code>scrabbleScore(S)</code> using loops. Have on option on your webpage to use either version, but keep in mind that the actual CGI implementation of both <code>scrabbleScoreRec(S)</code> and <code>scrabbleScore(S)</code> will be the <em>same</em>, regardless of which method you use. This is just to get you thinking about the fact that often there are a few different ways that any one problem may be approached.
<p />
<p />
<strong>Hint:</strong> you may want to use the following helper function(which need not use recursion!):
 <p> <code>letterScore(let)</code> should take as input a single-character string and produce as output the value of that character as a scrabble tile. If the input is not one   of the letters from <code>'a'</code> to <code>'z'</code>, the function should return 0.
<p />
To write this function you will need to us the mapping of letters to scores
<p />
<img src="https://www.cs.hmc.edu/twiki/pub/CS5/FunctionFrenzyGold/alphaScrabble.gif">
<p />
<strong>What?!</strong> Do I have to write 25 or 26 <code>if</code>, <code>elif</code> or <code>else</code> statements? <br>
<strong>No!</strong> Instead, use the <code>in</code> keyword:
<p />
<pre>
&#62;&#62;&#62; &#39;a&#39; in &#39;this is a string including a&#39;
True

&#62;&#62;&#62; &#39;q&#39; in &#39;this string does not have the the letter before r&#39;
False
</pre>
<p />
</p>
<p />
<p />
Once you have written your <code>scrabbleScoreRec(S)</code> and <code>scrabbleScore(S)</code> functions, implement them on your webpage. The final product should look something like the following:
<p />
<img src="https://www.cs.hmc.edu/~sjohnson/Scrabble/Picture 1.png">
<p />
With results much like:
<p />
<img src="https://www.cs.hmc.edu/~sjohnson/Scrabble/Picture 2.png">
<p />
<p />
But feel free to spice it up some more all you like.
<p />
<p />
<h3><a name="Fame_Indexing"></a> Fame Indexing </h3>
<p />
The goal of this assignment is to write a function called <code>fameIndex(word)</code> which returns the "Fame Index" of some <code>word</code> (input as a string), which in this case we shall determine by the amount written about that word on the relevant page of some online reference source. You may use any method you choose (recursion, loops, etc.) when writing this function, or for anything else later on, unless otherwise specified. Also remember: helper functions are your friends! The following bit of code will prove very useful:
<p />
<pre>
urlFile &#61; urllib.urlopen(str(url))
fameString &#61; urlFile.read()
</pre>
<p />
as the newly-created <code>fameString</code> above is now a string containing the entire source code for the given webpage, where <code>url</code> is the web address for that page.
<p />
You will also need to include this line in your Python file:
<pre>
import urllib</pre>
<p />
You may define your "Fame Index" as the number of words written on the given reference page, or if you come up with a more appropriate measure of fame that could be determined from the given source code, absolutely feel free to base your "Index" on your own theory. 
<p />
Your interface may look something like this:
<p />
<img src="https://www.cs.hmc.edu/~sjohnson/FameIndexing/Picture 1.png">
<p />
<p />
<img src="https://www.cs.hmc.edu/~sjohnson/FameIndexing/Picture 2.png">
<p />
As with the above example, you may wish to include a link to the page which you are using for your Index count.
<p />
<img src="https://www.cs.hmc.edu/~sjohnson/FameIndexing/Picture 3.png">
<p />
<p />
<p />
<h3><a name="Syllable_Counting"></a> Syllable Counting </h3>
<p />
Your <code>syllables( word)</code> function need only count syllables in words containing only capital or lowercase letters. When writing your code that counts syllables in a word, you should assume: <ul>
<li> A vowel is a capital or lowercase a, e, i, o, u, or y.
</li> <li> A syllable occurs in a given word whenever: <ul>
<li> Rule 1: a vowel is at the start of a word
</li> <li> Rule 2: a vowel follows a consonant in a word
</li> <li> Rule 3: there is one exception: if a lone vowel <code>e</code> or <code>E</code> is at the end of a word, then that vowel does not count as a syllable.
</li> <li> Rule 4: finally, everything that is a word must always count as having at least one syllable.
</li></ul> 
</li></ul> 
<p />
Here are some shell examples -- this <strong>definitely</strong> is not an exhaustive list of possibilities! You will want to test some other cases, as well.
<p />
<pre>
&#62;&#62;&#62; syllables( &#39;syllables&#39; )
3
&#62;&#62;&#62; syllables( &#39;one&#39; )
1
&#62;&#62;&#62; syllables( &#39;science&#39; )  # it&#39;s not always correct...
1
</pre>
<p />
These rules do not always match the number of syllables that English speakers would agree on, but for our purposes, and especially for the purpose of readability calculation which we will do later on, these rules will suffice.
<p />
An example of how your interface might look:
<p />
<img src="https://www.cs.hmc.edu/~sjohnson/SyllableCounting/Picture 1.png">
<p />
<img src="https://www.cs.hmc.edu/~sjohnson/SyllableCounting/Picture 2.png">
<p />
But, as always, this is merely an example of what your interface <em>may</em> look like. Creativity is absolutely encouraged, and certainly preferred.
<p />
<p />
-- <a class="twikiLink" href="/twiki/bin/view/Main/SarahJohnson">SarahJohnson</a> - 08 Jun 2010
<p />
-->
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<p />
<h2><a name="Problem_2_Rock_Paper_Scissors"></a> Problem 2: Rock, Paper, Scissors </h2>
<p />
In this problem, we'd like you to implement a Rock, Paper, Scissors game similar to the one you created previously, but playable online.
<p />
<hr />
<p />
<strong>Overview</strong>: Implement a web application that uses: <ul>
<li> HTML/CSS
</li> <li> CGI
</li></ul> 
<p />
<hr />
<p />
<strong>Example Interface:</strong>
<p />
<img src="http://www.cs.hmc.edu/~begerter/cs5assignmentIms/rps1.jpeg"/> <br />
<img src="http://www.cs.hmc.edu/~begerter/cs5assignmentIms/rps2.jpeg"/>
<p />
<hr />
<strong>Web Details:</strong>
<p />
In this assignment we would like you to use HTML + CSS to construct the pages and make them look presentable. You will use CGI to allow your front page to call the python script you have written. Remember that the easiest way to use CGI is through the action attribute of a form.
<p />
Here is a start that shows how to make a radio-button form. Copy the following HTML into a file named <tt>input.html</tt> in your <tt>web</tt>
directory:
<pre>
&#60;html&#62;
&#60;head&#62;&#60;title&#62;Hello from Python&#60;/title&#62;&#60;/head&#62;
&#60;body&#62;
&#60;h2&#62;Hello from Python&#60;/h2&#62;


&#60;!-- here is a web form --&#62;

&#60;form name&#61;&#34;input&#34; action&#61;&#34;cgi-bin/test.py&#34; method&#61;&#34;get&#34;&#62;
&#60;input type&#61;&#34;radio&#34; name&#61;&#34;name&#34; value&#61;&#34;rock&#34; /&#62; Rock&#60;br /&#62;
&#60;input type&#61;&#34;radio&#34; name&#61;&#34;name&#34; value&#61;&#34;paper&#34; /&#62; Paper&#60;br /&#62;
&#60;input type&#61;&#34;radio&#34; name&#61;&#34;name&#34; value&#61;&#34;scissors&#34; /&#62; Scissors&#60;br /&#62;
&#60;input type&#61;&#34;submit&#34; value&#61;&#34;Submit&#34;&#62;
&#60;/form&#62;

&#60;!-- this ends the web form --&#62;


&#60;/body&#62;
&#60;/html&#62;
</pre>
<p />
You can ensure that its permissions will be correct with <tt>chmod 644 input.html</tt>.
<p />
Then, load that file - whichever of the three you select and submit should be welcomed with the usual, personalized message... .
<p />
<br>
<p />
<h3><a name="Keep_going"></a><a name="Keep_going_"></a> Keep going... </h3>
<p />
Next, you'll want to finish by changing the <tt>test.py</tt> script so that it plays rock-paper-scissors. 
<p />
It's Python, so you should be set -- good luck!
<p />
<br>
<p />
<!--
<p />
<strong>Python Details:</strong>
<p />
In the previous part of this assignment, you wrote functions in python that were called when you ran your script. In this part, we'd like you to simply write a script ( similar to the last RPS game you created) which does not contain any Python functions, but rather takes in information through CGI from the HTML form, and prints out a webpage displaying the results. 
<p />
As with the last RPS, your player is not required to be honest.
<p />
<strong>Debugging your python script:</strong> Instead of using IDLE to debug your script, a command-line interface will prove more useful in this assignment. After navigating to the folder that your script lives in, type "python RPSend.py choice = <strong>your actual input</strong> ".
(Remember to change the bolded text!)
<p />
For example, on a Mac, this would look like:
<pre>
13:21 &#91;cs5grad&#64;dahlia:~/Desktop]
28 &#37; cd web
13:21 &#91;cs5grad&#64;dahlia:~/Desktop/web]
29 &#37; cd cgi-bin
13:21 &#91;cs5grad&#64;dahlia:~/Desktop/web/cgi-bin]
30 &#37; python RPSend.py choice&#61;paper
Content-Type: text/html; charset&#61;ISO-8859-1

&#60;center&#62;&#60;h2&#62;&#60;font color&#61;blue&#62;You chose paper .&#60;/font&#62;&#60;/h2&#62;&#60;/center&#62;
&#60;center&#62;&#60;h2&#62;&#60;font color&#61;red&#62;The computer chose Scissors .&#60;/font&#62;&#60;/h2&#62;&#60;/center&#62;
&#60;center&#62;&#60;h2&#62;&#60;font color&#61;green&#62;So, you lose! &#60;/font&#62;&#60;/h2&#62;&#60;/center&#62;

&#60;Center&#62;&#60;FORM&#62;&#60;INPUT TYPE&#61;&#34;button&#34; VALUE&#61;&#34;Play again??&#34; onClick&#61;&#34;history.go(-1);
return true;&#34;&#62;&#60;/FORM&#62;&#60;/Center&#62;
</pre>
<p />
<p />
In case you are not familiar with command-prompt...
<a href="http://www.cs.princeton.edu/courses/archive/spr05/cos126/cmd-prompt.html" target="_top">http://www.cs.princeton.edu/courses/archive/spr05/cos126/cmd-prompt.html</a>
<p />
-->
<p />
<!-- <ul>
<li> <strong>Don't forget</strong> to have <code>#!/usr/local/bin/python</code>, <code>import cgi</code>, and <code>import cgitb; cgitb.enable()</code> at the top of your python file
</li> <li> <strong>Don't forget</strong> that your script's output must start with
</li></ul> 
<pre>
   print &#34;Content-Type: text/html; charset&#61;ISO-8859-1\n\n&#34;
   print
</pre> <ul>
<li> <strong>Don't forget</strong> that the name of the input you are extracting from the CGI field storage object is the <em>same name</em> that you named the input on your initial HTML page
</li></ul> 
-->
<p />
<!--
In case you would like your RPS game to be fair, you can have it composed of 3 specific files: <ul>
<li> One file containing your main RPS function. This function should take as input either 'Rock', 'Paper', or 'Scissors'. It should then use the random library's (using <code>import random</code> at the top of the file) "choice" function (<code>random.choice(list)</code>), which takes a list as input, and returns a random choice from that list. Give this function the list ['Rock', 'Paper', 'Scissors']. Then use <code>if</code> statements to give a specific outcome depending on the user's input and the computer's input, and then return a list or tuple containing three strings: the user's input, the computer's input, and a string saying the result (e.g., ['Rock', 'Paper', 'You lose.']), based on the outcome.
</li></ul> 
<p /> <ul>
<li> One file containing the page that will display your choices "Rock", "Paper", and "Scissors". It should use radio buttons to make sure that only one choice is selected, and it should have a submit button that will send the choice to the result page.
</li></ul> 
<p /> <ul>
<li> One file containing the page that will display the result: your choice, the computer's random choice, and who won. This will call your RPS function, and it should have a back button to look nice. 
</li></ul> 
<p />
-->
<p />
<!--
Here is a zip file containing basic, working versions of these files. The "RPS.py" file contains the basic Rock-Paper-Scissors function, called "RPS()". The "rockpaperscissors.py" file contains the webpage that allows the user to select Rock, Paper, or Scissors. And lastly, the "RPSend.py" file contains the webpage that displays the result of playing the Rock-Paper-Scissors game with the computer. You can use these as reference, but for the sake of learning from experience, you should take the time to make files of your own. <ul>
<li> <a href="https://www.cs.hmc.edu/twiki/pub/CS5/WebExCr2011Lab3/Rock_Paper_Scissors.zip" target="_top">Rock_Paper_Scissors.zip</a>: The basic "Rock Paper Scissors" files.
</li></ul> 
<p />
If you would like to use your own filenames, that is perfectly fine. However, you must keep in mind that the files are all interconnected; the RPSend file imports the RPS.py function with a line <code>import RPS</code> at the top and the function call <code>RPS.RPS(stuff)</code> to get the results of the game, and the rockpaperscissors.py file calls RPSend.py with a line:
<pre>
&#60;form name&#61;&#34;input&#34; action&#61;&#34;RPSend.py&#34; method&#61;&#34;get&#34;&#62;
</pre>
...in order to send the results of the user input to RPSend. So make sure that you have the same lines, but with your own filenames substituted.
<p />
This will be a short introduction to using forms in CGI. You can use this page to supplement it:
<a href="http://www.w3schools.com/html/html_forms.asp" target="_top">http://www.w3schools.com/html/html_forms.asp</a>
<p />
<h4><a name="Making_the_files"></a> Making the files </h4>
Assuming you have already created a file with a working Rock-Paper-Scissors function that takes a user's string as input and returns a list containing the game's output (user's input string, computer's random choice between the strings 'Rock', 'Paper', or 'Scissors', and a string indicating the outcome, be it 'You tie", 'You win', or 'You lose'), let's start working on the other two files that will take input and then display a result.
<p />
As usual, be sure to start your files with:
<pre>
#!C:/Python27/python.exe

import cgi
import cgitb; cgitb.enable()
print &#34;Content-Type: text/html; charset&#61;ISO-8859-1\n\n&#34;
</pre>
<p />
<h5><a name="Input_Page_Rock_Paper_or_Scissor"></a> Input Page: Rock, Paper, or Scissors. </h5>
For this file that will take in the user's input, let's put a line that says <code>print """</code>, and then move to the next line. This will indicate that the following code will be html.
<p />
Next, let's put a big title of the page at the top, and center it, using the heading and center tags.
<pre>
&#60;html&#62;
&#60;body&#62;
&#60;center&#62;&#60;h1&#62;Let&#39;s play Rock-Paper-Scissors!&#60;/h1&#62;&#60;/center&#62;
</pre>
<p />
Then, let's add the buttons. First, we need an important line that will send the user's choice to our next file.
<pre>
&#60;form name&#61;&#34;input&#34; action&#61;&#34;RPSend.py&#34; method&#61;&#34;get&#34;&#62;
</pre>
In the line "action='RPSend.py'", you can replace the RPSend.py with whatever file name you will name your result file. Make sure they are in the same folder, which should be <code>cgi-bin</code>.
<p />
Now, let's put in the code that will allow for our choices with radio buttons. Radio buttons (<input type="radio">) are buttons that allow for only one to be selected at a time. 
<pre>
&#60;form&#62;
&#60;center&#62;&#60;input type&#61;&#34;radio&#34; name&#61;&#34;choice&#34; value&#61;&#34;Rock&#34; checked&#61;&#34;checked&#34;/&#62; Rock&#60;/center&#62;&#60;br /&#62;
&#60;center&#62;&#60;input type&#61;&#34;radio&#34; name&#61;&#34;choice&#34; value&#61;&#34;Paper&#34; /&#62;  Paper&#60;/center&#62;&#60;br /&#62;
&#60;center&#62;&#60;input type&#61;&#34;radio&#34; name&#61;&#34;choice&#34; value&#61;&#34;Scissors&#34; /&#62; Scissors&#60;/center&#62;&#60;br /&#62;
&#60;center&#62;&#60;input type &#61;&#34;submit&#34; value &#61;&#34;Play!!&#34; /&#62;&#60;/center&#62; 
&#60;/form&#62;
&#34;&#34;&#34;
</pre>
Let's break this code down.  <ul>
<li> The tag <pre>&#60;center&#62;</pre> centers the buttons in the middle of the page. 
</li></ul> 
<p /> <ul>
<li> The code <pre>input type&#61;&#34;radio&#34;</pre> sets the input to be radio buttons. You can set the input type to be other things, such as text ("text", <input type="text">), password fields ("password", <input type="password">), checkboxes ("checkbox", <input type="checkbox">), etc (viewable on <a href="http://www.w3schools.com/html/html_forms.asp" target="_top">http://www.w3schools.com/html/html_forms.asp</a>).
</li></ul> 
<p /> <ul>
<li> The code <pre>name&#61;&#34;choice&#34;</pre> sets what type of radio button will be used. "Name" represents a category of radio button; when you select a button with a certain name, all of the other buttons with the same name will be deselected. Thus, if you assign different "name"s for each of your radio buttons, such as "choice", "selection", and "pick", you may be able to select them all at once, but that's definitely not what we want.
</li></ul> 
<p /> <ul>
<li> The code <pre>value&#61;</pre> sets the value or data that will be assigned to the radio button. That is, when you submit, it will send the value of whatever button you chose. In this case, our values will be "Rock", "Paper", and "Scissors".
</li></ul> 
<p /> <ul>
<li> The line <pre>checked&#61;&#34;checked&#34;</pre> makes the input line it is in checked. Since radio buttons cannot be deselcted, this prevents the user from submitting without something selected. In this case, it will be "Rock" that is initially checked.
</li></ul> 
<p /> <ul>
<li> The text that will be displayed next to the radio button comes directly after the <pre>&#60;input type....&#62;</pre> code ends.
</li></ul> 
<p /> <ul>
<li> The <pre>&#60;br /&#62;</pre> tag inserts a line break, moving the next stuff on the page to the line under it.
</li></ul> 
<p /> <ul>
<li> The code <pre>&#60;input type &#61;&#34;submit&#34; value &#61;&#34;Play!!&#34; /&#62;</pre> provides the button that will send your input to the result page. The input words on the actual button will be whatever is assigned to "value", in this case, "Play!!"
</li></ul> 
<p /> <ul>
<li> The final three quotation marks indicate that the lines of html code are finished, and the following code will now be python.
</li></ul> 
<p />
This completes the page with the input. Now let's make our page that will give us the results of our game.
<p />
<h5><a name="Result_Page_Did_you_win"></a><a name="Result_Page_Did_you_win_"></a> Result Page: Did you win?? </h5>
For this file that will display the results of the game, let's start with our regular  
<pre>
#!C:/Python27/python.exe

import cgi
import cgitb; cgitb.enable()
print &#34;Content-Type: text/html; charset&#61;ISO-8859-1\n\n&#34;
</pre>
<p />
However, let's add in a few more lines:
<pre>
import RPS
form &#61; cgi.FieldStorage()
L &#61; form.getlist(&#34;choice&#34;)
mychoice &#61; L&#91;0]
outcome &#61; RPS.RPS(L&#91;0])
compchoice &#61; outcome&#91;1]
ending &#61; outcome&#91;2]
</pre>
<p />
Let's look at why we have these new lines of code:
<p /> <ul>
<li> The <code>import RPS</code> line will import the file containing your Rock-Paper-Scissors function, a file which I named RPS.py (but use whatever name you've given to that file). It should be in the same folder as your current file. 
</li></ul> 
<p /> <ul>
<li> The line <pre> form &#61; cgi.FieldStorage()</pre> gets the form data from your previous page, and saves it as a variable named <code>form</code>. 
</li></ul> 
<p /> <ul>
<li> Remember the name we assigned to our category of radio buttons? It was "choice". Using form.getlist("choice"), we can generate a list <code>L</code> that will contain the data submitted in the form that contains the name "choice". This will end up being the string we submitted: Rock, Paper, or Scissors. Thus, L[0], which we assign to <code>mychoice</code>, will be the string 'Rock', 'Paper', or 'Scissors', which we can now enter into our RPS function to get the result of a game of Rock-Paper-Scissors with a randomized computer.
</li></ul> 
<p /> <ul>
<li> By calling the RPS function from the RPS.py file with RPS(mychoice), we can create the list <code>outcome</code>, containing the strings of our move, the computer's move, and the game's winner
</li></ul> 
<p /> <ul>
<li> The second string in the outcome list should be the computer's move, so we can assign it (<code>outcome[1]</code>) to the variable <code>compchoice</code>.
</li></ul> 
<p /> <ul>
<li> The third string in the outcome list should be the string stating whether you won, lost, or tied the game, so we can assign it (<code>outcome[2]</code>) to the variable <code>ending</code>.
</li></ul> 
<p />
We're almost there! Now that we've processed the data from the form, we just need to get this data onto the screen.
<p />
Since we will be using python (with some html mixed in) to write out the information, we will not use the triple quotation mark...yet. We will just use simple print statements.
<pre>
print &#34;&#60;center&#62;&#60;h2&#62;&#60;font color&#61;blue&#62;You chose&#34;, mychoice, &#34;.&#60;/font&#62;&#60;/h2&#62;&#60;/center&#62;&#34;
print &#34;&#60;center&#62;&#60;h2&#62;&#60;font color&#61;red&#62;The computer chose&#34;, compchoice, &#34;.&#60;/font&#62;&#60;/h2&#62;&#60;/center&#62;&#34;
print &#34;&#60;center&#62;&#60;h2&#62;&#60;font color&#61;green&#62;So,&#34;, ending, &#34;&#60;/font&#62;&#60;/h2&#62;&#60;/center&#62;&#34;
</pre>
<p />
If you notice, the print statement strings are written just as you would write regular print statement strings, with quotes to separate data/variables from literal strings, but we have mixed in a little html to our literal strings to colorize and center our text. This is allowed because of our line <pre> print &#34;Content-Type: text/html; charset&#61;ISO-8859-1\n\n&#34; </pre> that we included earlier.
<p />
Now, to finish off our page, let's insert an html object, the "Back" button, which will allow us to play again. Since this is pure html, we will want to use the <code>print """</code> format that you learned earlier.
<p />
<pre>
print &#34;&#34;&#34;
&#60;Center&#62;&#60;FORM&#62;&#60;INPUT TYPE&#61;&#34;button&#34; VALUE&#61;&#34;Play again??&#34; onClick&#61;&#34;history.go(-1);
return true;&#34;&#62;&#60;/FORM&#62;&#60;/Center&#62;
&#34;&#34;&#34;
</pre>
<p />
Now, make sure you've set up your localhost by going to command prompt, changing to the directory containing your <code>web</code> folder, running <code>python -m CGIHTTPServer</code>, and then making sure your Rock-Paper-Scissors files are in the cgi-bin folder that you've made. Test out your files by going to <a href="http://localhost:8000/cgi-bin/rockpaperscissors.py" target="_top">http://localhost:8000/cgi-bin/rockpaperscissors.py</a> (or replace "rockpaperscissors.py" with the name of whatever python file you made that shows the radio button input page).
<p />
...And you've done it! Your very own html/cgi Rock-Paper-Scissors game. Great job! <img src="https://www.cs.hmc.edu/twiki/pub/TWiki/SmiliesPlugin/biggrin.gif" alt="big grin" title="big grin" border="0" />
-->
<p />
<h3><a name="Appendix_three_files_that_will_h"></a> Appendix: three files that will help implement rock-paper-scissors </h3>
<p />
Here are three files that will help implement the RPS game: <ul>
<li> the <tt>rockpaperscissors.py</tt> file is the place to start
</li> <li> the <tt></tt>
</li></ul> 
<p /><a name="bottom"></a>
</div>
<p />
<div class="footer">
<p />
</div>
<p />
</body>
</html>